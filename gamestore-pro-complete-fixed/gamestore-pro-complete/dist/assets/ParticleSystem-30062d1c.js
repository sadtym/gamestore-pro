import{j as F}from"./index-f2ef80b9.js";import{r as m}from"./vendor-729d4b68.js";const S=()=>{const[a,c]=m.useState(!1),[n,t]=m.useState("full");return m.useEffect(()=>{const r=window.matchMedia("(prefers-reduced-motion: reduce)"),i=()=>{const u=r.matches;if(c(u),u)t("minimal");else{const y=navigator.hardwareConcurrency<=4||navigator.deviceMemory<=4||window.innerWidth<768;t(y?"reduced":"full")}};return i(),r.addEventListener("change",i),()=>r.removeEventListener("change",i)},[]),{prefersReducedMotion:a,motionLevel:n,shouldReduceAnimations:n!=="full",shouldDisableParticles:n==="minimal"}},k=()=>{const[a,c]=m.useState({isLowEnd:!1,isMobile:!1,isTablet:!1,isDesktop:!1,cores:4,memory:4,connection:"4g"});return m.useEffect(()=>{const n=()=>{var M;const r=navigator.hardwareConcurrency||4,i=navigator.deviceMemory||4,u=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),y=/iPad|Android/i.test(navigator.userAgent)&&window.innerWidth>=768,f=!u&&!y,l=((M=navigator.connection)==null?void 0:M.effectiveType)||"4g",o=r<=4||i<=4||u&&l==="2g";c({isLowEnd:o,isMobile:u,isTablet:y,isDesktop:f,cores:r,memory:i,connection:l})};n();const t=navigator.connection;return t&&t.addEventListener("change",n),()=>{t&&t.removeEventListener("change",n)}},[]),a},j=()=>{const[a,c]=m.useState({fps:60,memoryUsage:0,loadTime:0,renderTime:0});return m.useEffect(()=>{let n,t=performance.now(),r=0;const i=()=>{const f=performance.now();if(r++,f-t>=1e3){const l=Math.round(r*1e3/(f-t));c(o=>({...o,fps:l})),r=0,t=f}n=requestAnimationFrame(i)};n=requestAnimationFrame(i);const y=setInterval(()=>{if("memory"in performance){const f=performance.memory,l=Math.round(f.usedJSHeapSize/f.jsHeapSizeLimit*100);c(o=>({...o,memoryUsage:l}))}},5e3);return()=>{cancelAnimationFrame(n),clearInterval(y)}},[]),a},q=()=>{const{motionLevel:a,shouldDisableParticles:c}=S(),n=k(),{fps:t,memoryUsage:r}=j();return{disableParticles:c||t<30||r>80,reduceMotion:a!=="full",lowQualityImages:n.isLowEnd||t<25,disableVideoAutoPlay:n.isLowEnd||t<20,useMinimalAnimations:r>70,preloadNextPage:n.isDesktop&&!n.isLowEnd}},W=({particleCount:a=50,particleSize:c=2,particleSpeed:n=.5,particleColor:t="#6C5CE7",showConnections:r=!1,connectionDistance:i=150,className:u=""})=>{if(q().disableParticles)return null;const l=m.useRef(null),o=m.useRef([]),M=m.useRef(),x=m.useRef({x:0,y:0});return m.useEffect(()=>{const d=l.current;if(!d)return;const s=d.getContext("2d");if(!s)return;const P=()=>{d.width=window.innerWidth,d.height=window.innerHeight};P(),window.addEventListener("resize",P);const R=()=>{o.current=[];for(let e=0;e<a;e++)o.current.push(E())},E=()=>({x:Math.random()*d.width,y:Math.random()*d.height,vx:(Math.random()-.5)*n,vy:(Math.random()-.5)*n,size:Math.random()*c+1,color:t,opacity:Math.random()*.6+.2,life:Math.random()*150+50,maxLife:Math.random()*150+50}),L=e=>{x.current.x=e.clientX,x.current.y=e.clientY,Math.random()<.1&&o.current.length<a*1.2&&o.current.push({x:e.clientX,y:e.clientY,vx:(Math.random()-.5)*n*1.5,vy:(Math.random()-.5)*n*1.5,size:Math.random()*c*1.5+1,color:t,opacity:.8,life:100,maxLife:100})},I=()=>{for(o.current=o.current.filter(e=>{e.x+=e.vx,e.y+=e.vy;const v=x.current.x-e.x,g=x.current.y-e.y,h=Math.sqrt(v*v+g*g);if(h<80){const w=(80-h)/80;e.vx+=v/h*w*.005,e.vy+=g/h*w*.005}return(e.x<0||e.x>d.width)&&(e.vx*=-1),(e.y<0||e.y>d.height)&&(e.vy*=-1),e.life--,e.opacity=e.life/e.maxLife,e.life>0});o.current.length<a;)o.current.push(E())},D=()=>{if(s.clearRect(0,0,d.width,d.height),r&&o.current.length<=50){s.save(),s.strokeStyle=`${t}30`,s.lineWidth=.5;for(let e=0;e<o.current.length;e++){const v=o.current[e];for(let g=e+1;g<o.current.length;g++){const h=o.current[g],w=v.x-h.x,A=v.y-h.y,z=Math.sqrt(w*w+A*A);if(z<i){const T=(1-z/i)*.4;s.globalAlpha=T,s.beginPath(),s.moveTo(v.x,v.y),s.lineTo(h.x,h.y),s.stroke()}}}s.restore()}s.save(),o.current.forEach(e=>{s.globalAlpha=e.opacity,s.fillStyle=e.color,s.shadowColor=e.color,s.shadowBlur=e.size,s.beginPath(),s.arc(e.x,e.y,e.size,0,Math.PI*2),s.fill()}),s.restore()},b=()=>{I(),D(),M.current=requestAnimationFrame(b)};return window.addEventListener("mousemove",L),R(),b(),()=>{window.removeEventListener("resize",P),window.removeEventListener("mousemove",L),M.current&&cancelAnimationFrame(M.current)}},[a,c,n,t,r,i]),F.jsx("canvas",{ref:l,className:`fixed inset-0 pointer-events-none z-0 ${u}`,style:{mixBlendMode:"screen"}})};export{W as P};
//# sourceMappingURL=ParticleSystem-30062d1c.js.map
